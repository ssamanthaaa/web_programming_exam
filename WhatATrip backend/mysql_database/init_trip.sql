create database IF NOT EXISTS trips;
COMMIT;
use trips;
#GRANT ALL PRIVILEGES ON trips.* TO 'mysql'@'%' IDENTIFIED BY 'Cioccolato123';
#GRANT ALL PRIVILEGES ON trips.* TO 'mysql'@'localhost' IDENTIFIED BY 'Cioccolato123';

CREATE TABLE if not exists USER (
	ID INT AUTO_INCREMENT PRIMARY KEY,
    USERNAME VARCHAR(45) UNIQUE NOT NULL,
    PASSWORD VARCHAR(200) NOT NULL,
    EMAIL VARCHAR(45) UNIQUE NOT NULL,
    TOKEN TEXT,
    ROLE VARCHAR(20) NOT NULL
);
COMMIT;

CREATE TABLE if not exists TRIP (
	ID INT AUTO_INCREMENT PRIMARY KEY,
	DATE Date NOT NULL,
	PLACE VARCHAR(45) NOT NULL,
	TRANSPORTATION varchar(45) NOT NULL,
	GEOJSON JSON NOT NULL,
    USER INT NOT NULL,
    DESCRIPTION VARCHAR(300),
    FOREIGN KEY (USER) REFERENCES USER(ID)
);
COMMIT;

INSERT IGNORE INTO  USER (USERNAME, PASSWORD, EMAIL, ROLE) VALUES ('admin', '1000:565b49e40bea89367ac20277df74b1a7:0f577b250692a8fbc17d8610b6b0b02bf3fb6aafa4b41844d25d1d4c4e0deb75659c4ca348d97122c2a0ba07f62dc289fc47e2038daf9f958f50dae484099500', 'admin@gmail.com', 'admin');
COMMIT;

